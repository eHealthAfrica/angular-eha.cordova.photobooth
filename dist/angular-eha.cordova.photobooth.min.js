!function(){"use strict";var a=angular.module("eha.cordova.directive.photobooth",["eha.cordova.service.camera","templates/cordova.photobooth.directive.tpl.html"]).value("navigator",navigator).value("document",document).directive("ehaCordovaPhotobooth",["ehaCordovaCamera","$log","$window","document","$timeout","navigator",function(a,b,c,d,e,f){return{restrict:"E",scope:{model:"=",callback:"&",encodingType:"@encodingType"},templateUrl:"templates/cordova.photobooth.directive.tpl.html",link:function(e){var g=e.vm={},h={encoding:"base64",encodingType:0,mimeType:"image/jpeg"},i=function(a){return encodeURI("data:"+h.mimeType+";"+h.encoding+","+a)};g.hasCamera=!1,"png"===e.encodingType?(h.encodingType=1,h.mimeType="image/png"):"jpeg"!==e.encodingType&&b.error('Invalid encoding type. "'+g.encodingType+'" is not supported'),e.model&&e.model.data&&(g.uri=i(e.model.data),g.hideRemoveButton=!0),d.addEventListener("deviceready",function(){f.camera&&(g.hasCamera=!0)});var j=function(){return 0===h.encodingType?"jpeg":"png"};g.getPicture=function(){a.getPicture(h).then(function(a){g.uri=i(a),e.model={mimeType:h.mimeType,encoding:h.encoding,encodingType:j(),data:a},e.callback&&e.callback({data:a})})["catch"](function(a){a&&(b.error(a),c.alert(a))})},g.removePicture=function(){g.uri=null}}}}]);"undefined"!=typeof module&&module.exports&&(module.exports=a)}();